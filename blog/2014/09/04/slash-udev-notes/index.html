
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>/udev notes - learn</title>
  <meta name="author" content="Ankit">

  
  <meta name="description" content="Problems with /dev A static /dev is unwiedly big. It would be nice to show only /dev enteries for the devices that we acutally have running in the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://goyalankit.github.io/notes-blog/blog/2014/09/04/slash-udev-notes">
  <link href="/notes-blog/favicon.png" rel="icon">
  <link href="/notes-blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="source/atom.xml" rel="alternate" title="learn" type="application/atom+xml">
  <script src="/notes-blog/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/notes-blog/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="header-inner">
    <span class="first"><a href="/notes-blog/">learn</a></span>
    <span><a href="/notes-blog/about">about</a></span>
    <span><a href="http://www.github.com/">projects</a></span>
    <span class="last"><a href="source/atom.xml" title="subscribe via RSS">rss</a></span>
  </div>
</hgroup>

</header>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">/udev Notes</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-09-04T02:13:15-05:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><h3>Problems with <code>/dev</code></h3>

<ol>
<li>A static /dev is unwiedly big. It would be nice to show only /dev enteries for the devices that we acutally have running in the system.</li>
<li>We are running out of major and minor number for devices.</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>  <span class="o">[</span>vagrant@vagrant-centos64 ~<span class="o">]</span><span class="nv">$ </span>ls -l /dev/sda
</span><span class='line'>  brw-rw---- <span class="m">1</span> root disk 8, <span class="m">0</span> Aug <span class="m">14</span> 05:36 /dev/sda
</span><span class='line'>
</span><span class='line'>  <span class="c"># shows permissions (brw-rw---- ), owner (root), group (disk), major device number (8), </span>
</span><span class='line'>    minor device number <span class="o">(</span>0<span class="o">)</span>, date <span class="o">(</span>Aug 14<span class="o">)</span>, hour <span class="o">(</span>05:36<span class="o">)</span> and device name
</span></code></pre></td></tr></table></div></figure>


<p>  When accessing a device file, the major device number selects which device driver is being called to perform read/write. Minor number is passed as a parameter and its usage/interpretations depends on the driver.<br/></p>

<ol>
<li>Users want a way to name devices in persistant fashion.</li>
<li>Userspace programs wants to know what devices are created or removed and what /dev entry is associated with them.</li>
</ol>


<h3><code>udev</code></h3>

<p>Presentation on udev: <a href="http://www.kroah.com/linux/talks/ols_2003_udev_talk/mgp00001.html">http://www.kroah.com/linux/talks/ols_2003_udev_talk/mgp00001.html</a></p>

<ol>
<li>the /dev tree is populated only for devices that are currently present in the system.</li>
<li>udev doesn&rsquo;t care about major or minor number schemes.</li>
<li>It provides ability to name devices persistently.</li>
<li>udev emites D-BUS messages so that any userspace program can listen to what devices are created or removed. Userspace programs can also query the database to see what devices are present and what they are currently named.</li>
</ol>


<h3>Dynamic <code>/dev</code></h3>

<p>The content of /dev directory are stored on a temporary file system and all files are render at every system startup. Static files that should always be present in /dev directory can be placed in /lib/udev/devices directory. All the contents of /lib/udev/devices directory are copied to /dev at startup.</p>

<blockquote><p>how does kernel knows which device driver to choose without major or minor device number.</p></blockquote>

<p>The kernel bus drivers probe for devices. For every detected devices kernel creates an internal device structure and sends a uevent to udev deamon. Each devices identifies itself by specially-formatted ID, which tells what kind of device it is. It usually consists of vendor ID, product ID and other subsystem specific values.</p>

<p><code>/etc/udev/rules.d/*.rules</code> contains rules for different devices and <code>udev</code> deamon parses and loads all of them at the startup.</p>

<p>More Info at:
<a href="http://doc.opensuse.org/products/draft/SLES/SLES-admin_sd_draft/cha.udev.html#sec.udev.devdir">http://doc.opensuse.org/products/draft/SLES/SLES-admin_sd_draft/cha.udev.html#sec.udev.devdir</a></p>

<hr/>



</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Ankit</span></span>

      








  


<time datetime="2014-09-04T02:13:15-05:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/notes-blog/blog/categories/filesystem/'>filesystem</a>, <a class='category' href='/notes-blog/blog/categories/unix/'>unix</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://goyalankit.github.io/notes-blog/blog/2014/09/04/slash-udev-notes/" data-via="_goyalankit" data-counturl="http://goyalankit.github.io/notes-blog/blog/2014/09/04/slash-udev-notes/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/notes-blog/blog/2014/09/03/the-unix-time-sharing-system-notes/" title="Previous Post: The Unix Time-Sharing System Notes">&laquo; The Unix Time-Sharing System Notes</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/notes-blog/blog/2014/09/04/slash-udev-notes/">/udev Notes</a>
      </li>
    
      <li class="post">
        <a href="/notes-blog/blog/2014/09/03/the-unix-time-sharing-system-notes/">The Unix Time-Sharing System Notes</a>
      </li>
    
      <li class="post">
        <a href="/notes-blog/blog/2014/08/31/unique-abbreviation-for-a-list-of-words/">Unique Abbreviation for a List of Words</a>
      </li>
    
      <li class="post">
        <a href="/notes-blog/blog/2014/08/31/swap-using-reference/">Swap Using Reference</a>
      </li>
    
      <li class="post">
        <a href="/notes-blog/blog/2014/08/31/hola-mundo/">Hola Mundo</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/goyalankit">@goyalankit</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'goyalankit',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/notes-blog/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Ankit -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'goyalankit';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://goyalankit.github.io/notes-blog/blog/2014/09/04/slash-udev-notes/';
        var disqus_url = 'http://goyalankit.github.io/notes-blog/blog/2014/09/04/slash-udev-notes/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
